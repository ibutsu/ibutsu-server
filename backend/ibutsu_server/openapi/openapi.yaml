openapi: 3.0.0
info:
  description: A system to store and query test results
  title: Ibutsu API
  version: 2.0.3
servers:
  - url: /api
tags:
  - description: The result of a test
    name: result
  - description: An artifact generated during the running of a test
    name: artifact
  - description: A collection of test results
    name: run
  - description: A collection of test runs
    name: project
  - description: A group of projects
    name: group
  - description: A report
    name: report
  - description: A health report
    name: health
  - description: Widgets
    name: widget
  - description: Widget configuration
    name: widget-config
  - description: Celery task
    name: task
  - description: Login related methods
    name: login
security:
  - jwt: []
paths:
  /result:
    get:
      description: |
        The `filter` parameter takes a list of filters to apply in the form of:

            {name}{operator}{value}

        where:

          - `name` is any valid column in the database
          - `operator` is one of `=`, `!`, `＞`, `＜`, `)`, `(`, `~`, `*`
          - `value` is what you want to filter by

        Operators are simple correspondents to MongoDB's query selectors:

          - `=` becomes `$eq`
          - `!` becomes `$ne`
          - `＞` becomes `$gt`
          - `＜` becomes `$lt`
          - `)` becomes `$gte`
          - `(` becomes `$lte`
          - `~` becomes `$regex`
          - `*` becomes `$in`
          - `@` becomes `$exists`

        Notes:

        - For the `$exists` operator, "true", "t", "yes", "y" and `1` will all be considered true,
          all other values are considered false.

        Example queries:

            /result?filter=metadata.run=63fe5
            /result?filter=test_id~neg
            /result?filter=result!passed
      operationId: get_result_list
      parameters:
        - description: Fields to filter by
          explode: true
          in: query
          name: filter
          required: false
          schema:
            items:
              type: string
            type: array
          style: form
        - description: Return an estimated count
          in: query
          name: estimate
          required: false
          schema:
            type: boolean
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultList'
          description: successful operation
        201:
          content:
            application/json:
              schema:
                type: object
          description: Query being evaluated in a celery task
      summary: Get the list of results.
      tags:
        - result
      x-openapi-router-controller: ibutsu_server.controllers.result_controller
    post:
      operationId: add_result
      requestBody:
        $ref: '#/components/requestBodies/Result'
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Result'
          description: Created
        400:
          description: Bad request, JSON required or not enough parameters
      summary: Create a test result
      tags:
        - result
      x-openapi-router-controller: ibutsu_server.controllers.result_controller
  /result/{id}:
    get:
      operationId: get_result
      parameters:
        - description: ID of result to return (uuid required)
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Result'
          description: Result item
        404:
          description: Result not found
      summary: Get a single result
      tags:
        - result
      x-openapi-router-controller: ibutsu_server.controllers.result_controller
    put:
      operationId: update_result
      parameters:
        - description: ID of result to update
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        $ref: '#/components/requestBodies/Result'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Result'
          description: successful operation
        400:
          description: Bad reqest, JSON required or not enough parameters
        404:
          description: Result not found
      summary: Updates a single result
      tags:
        - result
      x-openapi-router-controller: ibutsu_server.controllers.result_controller
  /artifact:
    get:
      operationId: get_artifact_list
      parameters:
        - description: The result ID to filter by
          explode: true
          in: query
          name: resultId
          required: false
          schema:
            type: string
            format: uuid
          style: form
        - description: The run ID to filter by
          explode: true
          in: query
          name: runId
          required: false
          schema:
            type: string
            format: uuid
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArtifactList'
          description: Array of artifacts
      summary: Get a (filtered) list of artifacts
      tags:
        - artifact
      x-openapi-router-controller: ibutsu_server.controllers.artifact_controller
    post:
      operationId: upload_artifact
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                resultId:
                  description: ID of result to attach artifact to
                  type: string
                runId:
                  description: ID of run to attach artifact to
                  type: string
                filename:
                  description: ID of pet to update
                  type: string
                file:
                  description: file to upload
                  format: binary
                  type: string
                additionalMetadata:
                  description: Additional data to pass to server
                  type: object
              required:
                - file
                - filename
              type: object
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Artifact'
          description: An artifact was created
        400:
          description: Bad request, not enough parameters
      summary: Uploads a test run artifact
      tags:
        - artifact
      x-openapi-router-controller: ibutsu_server.controllers.artifact_controller
  /artifact/{id}:
    delete:
      operationId: delete_artifact
      parameters:
        - description: ID of artifact to delete
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          description: The artifact was deleted
        404:
          description: The artifact was not found
      summary: Delete an artifact
      tags:
        - artifact
      x-openapi-router-controller: ibutsu_server.controllers.artifact_controller
    get:
      operationId: get_artifact
      parameters:
        - description: ID of artifact to return
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Artifact'
          description: Artifact object
        404:
          description: Artifact not found
      summary: Get a single artifact
      tags:
        - artifact
      x-openapi-router-controller: ibutsu_server.controllers.artifact_controller
  /artifact/{id}/download:
    get:
      operationId: download_artifact
      parameters:
        - description: ID of artifact to return
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            text/plain:
              schema:
                format: binary
                type: string
            image/jpeg:
              schema:
                format: binary
                type: string
            image/png:
              schema:
                format: binary
                type: string
            image/gif:
              schema:
                format: binary
                type: string
            application/octet-stream:
              schema:
                format: binary
                type: string
          description: File contents
        404:
          description: Artifact not found
      summary: Download an artifact
      tags:
        - artifact
      x-openapi-router-controller: ibutsu_server.controllers.artifact_controller
  /artifact/{id}/view:
    get:
      operationId: view_artifact
      parameters:
        - description: ID of artifact to return
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            text/plain:
              schema:
                format: binary
                type: string
            image/jpeg:
              schema:
                format: binary
                type: string
            image/png:
              schema:
                format: binary
                type: string
            image/gif:
              schema:
                format: binary
                type: string
            application/octet-stream:
              schema:
                format: binary
                type: string
          description: File contents
        404:
          description: Artifact not found
      summary: Stream an artifact directly to the client/browser
      tags:
        - artifact
      x-openapi-router-controller: ibutsu_server.controllers.artifact_controller
  /run:
    get:
      description: |
        The `filter` parameter takes a list of filters to apply in the form of:


            {name}{operator}{value}


        where:

          - `name` is any valid column in the database
          - `operator` is one of `=`, `!`, `＞`, `＜`, `)`, `(`, `~`, `*`
          - `value` is what you want to filter by

        Operators are simple correspondents to MongoDB's query selectors:

          - `=` becomes `$eq`
          - `!` becomes `$ne`
          - `＞` becomes `$gt`
          - `＜` becomes `$lt`
          - `)` becomes `$gte`
          - `(` becomes `$lte`
          - `~` becomes `$regex`
          - `*` becomes `$in`
          - `@` becomes `$exists`

        Notes:

        - For the `$exists` operator, "true", "t", "yes", "y" and `1` will all be considered true,
          all other values are considered false.

        Example queries:

            /run?filter=metadata.jenkins.job_name=jenkins_job
            /run?filter=summary.failures>0

      operationId: get_run_list
      parameters:
        - description: Fields to filter by
          explode: true
          in: query
          name: filter
          required: false
          schema:
            items:
              type: string
            type: array
          style: form
        - description: Return an estimated count
          in: query
          name: estimate
          required: false
          schema:
            type: boolean
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunList'
          description: Array of Runs
        201:
          content:
            application/json:
              schema:
                type: object
          description: Query being evaluated in a celery task
      summary: Get a list of the test runs
      tags:
        - run
      x-openapi-router-controller: ibutsu_server.controllers.run_controller
    post:
      operationId: add_run
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Run'
        description: Run item
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Run'
          description: A Run was created
        400:
          description: Bad request, JSON required
      summary: Create a run
      tags:
        - run
      x-openapi-router-controller: ibutsu_server.controllers.run_controller
  /runs/bulk-update:
    post:
      operationId: bulk_update
      parameters:
        - description: Fields to filter by
          explode: true
          in: query
          name: filter
          required: false
          schema:
            items:
              type: string
            type: array
          style: form
        - $ref: '#/components/parameters/PageSize'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRun'
        description: The metadata to add to the test runs
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunList'
          description: Updated Run
        400:
          description: Bad request, JSON required
        401:
          description: Bad request, can only update metadata
        404:
          description: Filter(s) returned no Runs
        405:
          description: Bad request, cannot update more than 25 runs at a time
      summary: Update multiple runs with common metadata
      tags:
        - run
      x-openapi-router-controller: ibutsu_server.controllers.run_controller
  /run/{id}:
    get:
      operationId: get_run
      parameters:
        - description: ID of test run
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Run'
          description: Run item
        404:
          description: Run not found
      summary: Get a single run by ID (uuid required)
      tags:
        - run
      x-openapi-router-controller: ibutsu_server.controllers.run_controller
    put:
      operationId: update_run
      parameters:
        - description: ID of the test run
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Run'
        description: The updated test run
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Run'
          description: Updated Run
        400:
          description: Bad request, JSON required
        404:
          description: Run not found
      summary: Update a single run
      tags:
        - run
      x-openapi-router-controller: ibutsu_server.controllers.run_controller
  /project:
    get:
      operationId: get_project_list
      parameters:
        - description: Filter projects by owner ID
          explode: true
          in: query
          name: ownerId
          required: false
          schema:
            type: string
          style: form
        - description: Filter projects by group ID
          explode: true
          in: query
          name: groupId
          required: false
          schema:
            type: string
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectList'
          description: Array of projects
      summary: Get a list of projects
      tags:
        - project
      x-openapi-router-controller: ibutsu_server.controllers.project_controller
    post:
      operationId: add_project
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Project'
        description: Project
        required: true
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: A project was created
        400:
          description: Bad request, JSON required
      summary: Create a project
      tags:
        - project
      x-openapi-router-controller: ibutsu_server.controllers.project_controller
  /project/{id}:
    get:
      operationId: get_project
      parameters:
        - description: ID of test project
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: Project object
        404:
          description: Project not found
      summary: Get a single project by ID
      tags:
        - project
      x-openapi-router-controller: ibutsu_server.controllers.project_controller
    put:
      operationId: update_project
      parameters:
        - description: ID of test project
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Project'
        description: Project
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: Project object
        400:
          description: Bad request, JSON required or not enough parameters
        404:
          description: Project not found
      summary: Update a project
      tags:
        - project
      x-openapi-router-controller: ibutsu_server.controllers.project_controller
  /group:
    get:
      operationId: get_group_list
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupList'
          description: A list of groups
      summary: Get a list of groups
      tags:
        - group
      x-openapi-router-controller: ibutsu_server.controllers.group_controller
    post:
      operationId: add_group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Group'
        description: The group
        required: true
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
          description: Group created
        400:
          description: Bad request, probably not enough parameters
      summary: Create a new group
      tags:
        - group
      x-openapi-router-controller: ibutsu_server.controllers.group_controller
  /group/{id}:
    get:
      operationId: get_group
      parameters:
        - description: The ID of the group
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
          description: Group item
        404:
          description: Group not found
      summary: Get a group
      tags:
        - group
      x-openapi-router-controller: ibutsu_server.controllers.group_controller
    put:
      operationId: update_group
      parameters:
        - description: The ID of the group
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Group'
        description: The updated group
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
          description: Group item
        400:
          description: Bad request, probably not enough parameters
        404:
          description: Group not found
      summary: Update a group
      tags:
        - group
      x-openapi-router-controller: ibutsu_server.controllers.group_controller
  /dashboard:
    get:
      operationId: get_dashboard_list
      parameters:
        - description: Filter dashboards by project ID
          explode: true
          in: query
          name: project_id
          required: false
          schema:
            type: string
          style: form
        - description: Filter dashboards by user ID
          explode: true
          in: query
          name: user_id
          required: false
          schema:
            type: string
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardList'
          description: Array of dashboards
      summary: Get a list of dashboards
      tags:
        - dashboard
      x-openapi-router-controller: ibutsu_server.controllers.dashboard_controller
    post:
      operationId: add_dashboard
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Dashboard'
        description: Dashboard
        required: true
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dashboard'
          description: A dashboard was created
        400:
          description: Bad request, JSON required
      summary: Create a dashboard
      tags:
        - dashboard
      x-openapi-router-controller: ibutsu_server.controllers.dashboard_controller
  /dashboard/{id}:
    get:
      operationId: get_dashboard
      parameters:
        - description: ID of test dashboard
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dashboard'
          description: Dashboard object
        404:
          description: Dashboard not found
      summary: Get a single dashboard by ID
      tags:
        - dashboard
      x-openapi-router-controller: ibutsu_server.controllers.dashboard_controller
    put:
      operationId: update_dashboard
      parameters:
        - description: ID of test dashboard
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Dashboard'
        description: Dashboard
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dashboard'
          description: Dashboard object
        400:
          description: Bad request, JSON required or not enough parameters
        404:
          description: Dashboard not found
      summary: Update a dashboard
      tags:
        - dashboard
      x-openapi-router-controller: ibutsu_server.controllers.dashboard_controller
    delete:
      operationId: delete_dashboard
      parameters:
        - description: ID of dashboard to delete
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          description: The dashboard was deleted
        404:
          description: The dashboard was not found
      summary: Delete a dashboard
      tags:
        - dashboard
      x-openapi-router-controller: ibutsu_server.controllers.dashboard_controller
  /report:
    get:
      operationId: get_report_list
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
        - description: Filter reports by project ID
          explode: true
          in: query
          name: project
          required: false
          schema:
            type: string
          style: form
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportList'
          description: A list of reports
      summary: Get a list of reports
      tags:
        - report
      x-openapi-router-controller: ibutsu_server.controllers.report_controller
    post:
      operationId: add_report
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportParameters'
        description: The parameters for the report
        required: true
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Report'
          description: Report created
        400:
          description: Bad request, probably not enough parameters
      summary: Create a new report
      tags:
        - report
      x-openapi-router-controller: ibutsu_server.controllers.report_controller
  /report/{id}:
    get:
      operationId: get_report
      parameters:
        - description: The ID of the report
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Report'
          description: Report item
        404:
          description: Report not found
      summary: Get a report
      tags:
        - report
      x-openapi-router-controller: ibutsu_server.controllers.report_controller
    delete:
      operationId: delete_report
      parameters:
        - description: ID of report to delete
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          description: The report was deleted
        404:
          description: The report was not found
      summary: Delete a report
      tags:
        - report
      x-openapi-router-controller: ibutsu_server.controllers.report_controller
  /report/{id}/view/{filename}:
    get:
      operationId: view_report
      parameters:
        - description: The ID of the report
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
        - description: The file name of the downloadable report
          explode: false
          in: path
          name: filename
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          content:
            text/plain:
              schema:
                format: binary
                type: string
            application/csv:
              schema:
                format: binary
                type: string
            application/json:
              schema:
                format: binary
                type: string
            text/html:
              schema:
                format: binary
                type: string
            application/zip:
              schema:
                format: binary
                type: string
          description: File contents
        404:
          description: Artifact not found
      summary: View a report
      tags:
        - report
      x-openapi-router-controller: ibutsu_server.controllers.report_controller
  /report/{id}/download/{filename}:
    get:
      operationId: download_report
      parameters:
        - description: The ID of the report
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
        - description: The file name of the downloadable report
          explode: false
          in: path
          name: filename
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          content:
            text/plain:
              schema:
                format: binary
                type: string
            application/csv:
              schema:
                format: binary
                type: string
            application/json:
              schema:
                format: binary
                type: string
            text/html:
              schema:
                format: binary
                type: string
            application/zip:
              schema:
                format: binary
                type: string
          description: File contents
        404:
          description: Artifact not found
      summary: Download a report
      tags:
        - report
      x-openapi-router-controller: ibutsu_server.controllers.report_controller
  /report/types:
    get:
      operationId: get_report_types
      responses:
        200:
          content:
            application/json:
              schema:
                items:
                  properties:
                    type:
                      description: The machine-readable name of report type
                      example: csv
                      type: string
                    name:
                      description: The human-readable name of report type
                      example: CSV
                      type: string
                  type: object
                type: array
          description: A list of types of reports available
      summary: Get a list of report types
      tags:
        - report
      x-openapi-router-controller: ibutsu_server.controllers.report_controller
  /widget/{id}:
    get:
      operationId: get_widget
      parameters:
        - description: The widget identifier
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
        - description: The parameters for the widget
          in: query
          name: params
          schema:
            type: object
          style: form
          explode: true
      responses:
        200:
          content:
            application/json:
              schema:
                type: object
          description: The data returned for the widget
        404:
          description: No widget of this type exists
      summary: Generate data for a dashboard widget
      tags:
        - widget
      x-openapi-router-controller: ibutsu_server.controllers.widget_controller
  /widget/types:
    get:
      description: A list of widget types
      operationId: get_widget_types
      parameters:
        - description: Filter by type of widget
          explode: true
          in: query
          name: type
          required: false
          schema:
            type: string
          style: form
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetTypeList'
          description: A list of types of widgets available
      summary: Get a list of widget types
      tags:
        - widget
      x-openapi-router-controller: ibutsu_server.controllers.widget_controller
  /widget-config:
    get:
      description: A list of widget configurations
      operationId: get_widget_config_list
      parameters:
        - description: Fields to filter by
          explode: true
          in: query
          name: filter
          required: false
          schema:
            items:
              type: string
            type: array
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetConfigList'
          description: successful operation
      summary: Get the list of widget configurations
      tags:
        - widget-config
      x-openapi-router-controller: ibutsu_server.controllers.widget_config_controller
    post:
      operationId: add_widget_config
      requestBody:
        $ref: '#/components/requestBodies/WidgetConfig'
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetConfig'
          description: Created
        400:
          description: Bad request, JSON required or not enough parameters
      summary: Create a widget configuration
      tags:
        - widget-config
      x-openapi-router-controller: ibutsu_server.controllers.widget_config_controller
  /widget-config/{id}:
    get:
      operationId: get_widget_config
      parameters:
        - description: ID of widget config to return
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetConfig'
          description: WidgetConfig item
        404:
          description: WidgetConfig not found
      summary: Get a single widget configuration
      tags:
      - widget-config
      x-openapi-router-controller: ibutsu_server.controllers.widget_config_controller
    put:
      operationId: update_widget_config
      parameters:
        - description: ID of widget configuration to update
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        $ref: '#/components/requestBodies/WidgetConfig'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetConfig'
          description: successful operation
        400:
          description: Bad reqest, JSON required or not enough parameters
        404:
          description: Widget configuration not found
      summary: Updates a single widget configuration
      tags:
        - widget-config
      x-openapi-router-controller: ibutsu_server.controllers.widget_config_controller
    delete:
      operationId: delete_widget_config
      parameters:
        - description: ID of widget configuration to delete
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          description: The widget configuration was deleted
        404:
          description: The widget configuration was not found
      summary: Delete a widget configuration
      tags:
        - widget-config
      x-openapi-router-controller: ibutsu_server.controllers.widget_config_controller
  /health:
    get:
      operationId: get_health
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Health'
          description: A health report
      summary: Get a general health report
      tags:
        - health
      x-openapi-router-controller: ibutsu_server.controllers.health_controller
  /health/database:
    get:
      operationId: get_database_health
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Health'
          description: A health report
        500:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Health'
          description: A health report with an error
      summary: Get a health report for the database
      tags:
        - health
      x-openapi-router-controller: ibutsu_server.controllers.health_controller
  /health/info:
    get:
      operationId: get_health_info
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthInfo'
          description: Some information about the server
      summary: Get information about the server
      tags:
        - health
      x-openapi-router-controller: ibutsu_server.controllers.health_controller
  /import:
    post:
      operationId: add_import
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                importFile:
                  description: The file to import
                  format: binary
                  type: string
                project:
                  description: The project associated with this import
                  type: string
                metadata:
                  description: Additional metadata about imported run
                  type: object
              required:
                - importFile
              type: object
            encoding:
              importFile:
                contentType: application/octet-stream
              metadata:
                contentType: application/json
              project:
                contentType: text/plain
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Import'
          description: The file has been queued for importing
        400:
          description: Bad Request
        415:
          description: Unsupported Media Type. This file cannot be imported
      summary: Import a file into Ibutsu. This can be either a JUnit XML file, or an Ibutsu archive
      tags:
        - import
      x-openapi-router-controller: ibutsu_server.controllers.import_controller
  /import/{id}:
    get:
      operationId: get_import
      parameters:
        - description: The ID of the import
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Import'
          description: The file has successfully been imported
        202:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Import'
          description: The file is currently being imported
        404:
          description: The import does not exist
      summary: Get the status of an import
      tags:
        - import
      x-openapi-router-controller: ibutsu_server.controllers.import_controller
  /task/{id}:
    get:
      operationId: get_task
      parameters:
        - description: The ID of the task
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                type: object
          description: The task has completed and the data has been returned
        206:
          content:
            application/json:
              schema:
                type: object
          description: The task either doesn't exist or hasn't finished
        203:
          content:
            text/plain:
              schema:
                type: object
          description: Error occurred in the task
      summary: Get the status or result of a task
      tags:
        - task
      x-openapi-router-controller: ibutsu_server.controllers.task_controller
  /login:
    post:
      operationId: login
      requestBody:
        $ref: '#/components/requestBodies/Credentials'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginToken'
          description: The user was authenticated
        401:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginError'
          description: There was an error when the user tried to log in
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /login/support:
    get:
      operationId: support
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginSupport'
          description: A list of the login types supported by the backend
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /login/config/{provider}:
    get:
      operationId: config
      parameters:
        - description: The login provider's configuration
          explode: false
          in: path
          name: provider
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginConfig'
          description: A list of the login types supported by the backend
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /login/auth/{provider}:
    get:
      operationId: auth
      parameters:
        - description: The login provider's configuration
          explode: false
          in: path
          name: provider
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          description: Successful auth
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /login/register:
    post:
      operationId: register
      requestBody:
        $ref: '#/components/requestBodies/AccountRegistration'
      responses:
        201:
          description: The user was registered
        401:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginError'
          description: There was an error when the user tried to log in
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /login/recover:
    post:
      operationId: recover
      requestBody:
        $ref: '#/components/requestBodies/AccountRecovery'
      responses:
        201:
          description: An e-mail was sent to the user
        400:
          description: There was an error when the user tried to recover their account
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /login/reset-password:
    post:
      operationId: reset_password
      requestBody:
        $ref: '#/components/requestBodies/AccountReset'
      responses:
        201:
          description: The user's password was reset
        400:
          description: There was an error when the user tried to reset their password
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /login/activate/{activation_code}:
    get:
      operationId: activate
      parameters:
        - description: The activation code
          explode: false
          in: path
          name: activation_code
          required: true
          schema:
            type: string
          style: simple
      responses:
        302:
          description: Redirect the user to the login page
        404:
          description: The activation code was not found
      tags:
        - login
      security: []
      x-openapi-router-controller: ibutsu_server.controllers.login_controller
  /user:
    get:
      operationId: get_user
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: The details of the logged in user
        401:
          description: The user needs to be logged in
      summary: Return the user details for the current user
      tags:
        - user
      x-openapi-router-controller: ibutsu_server.controllers.user_controller
  /user/token:
    get:
      operationId: get_token_list
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenList'
          description: The list of tokens for the logged in user
        401:
          description: The user needs to be logged in
      summary: Return the tokens for the user
      tags:
        - user
      x-openapi-router-controller: ibutsu_server.controllers.user_controller
    post:
      operationId: add_token
      requestBody:
        $ref: '#/components/requestBodies/CreateToken'
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
          description: The newly created token
        401:
          description: The user needs to be logged in
      summary: Create a token for the current user
      tags:
        - user
      x-openapi-router-controller: ibutsu_server.controllers.user_controller
  /user/token/{id}:
    get:
      operationId: get_token
      parameters:
        - description: The id of a token
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
          description: A single token for the logged in user
        401:
          description: The user needs to be logged in
      summary: Retrieve a single token for the current user
      tags:
        - user
      x-openapi-router-controller: ibutsu_server.controllers.user_controller
    delete:
      operationId: delete_token
      parameters:
        - description: The id of a token
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          description: The token was deleted
        401:
          description: The user needs to be logged in
      summary: Delete the token
      tags:
        - user
      x-openapi-router-controller: ibutsu_server.controllers.user_controller
  /admin/user:
    get:
      operationId: get_user_list
      parameters:
        - description: Fields to filter by
          explode: true
          in: query
          name: filter
          required: false
          schema:
            items:
              type: string
            type: array
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserList'
          description: Returns a list of users
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
      tags:
        - admin/user management
      summary: Administration endpoint to return a list of users. Only accessible to superadmins.
      x-openapi-router-controller: ibutsu_server.controllers.admin.user_controller
    post:
      operationId: add_user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
        description: A user
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: A user was created
        400:
          description: Bad request, JSON required
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
      tags:
        - admin/user management
      summary: Administration endpoint to manually add a user. Only accessible to superadmins.
      x-openapi-router-controller: ibutsu_server.controllers.admin.user_controller
  /admin/user/{id}:
    get:
      operationId: get_user
      parameters:
        - description: The id of a user
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: Returns a user
        401:
          description: The querying user needs to be logged in
        403:
          description: The querying user needs to be a superadmin
        404:
          description: The requested user does not exist
      tags:
        - admin/user management
      summary: Administration endpoint to return a user. Only accessible to superadmins.
      x-openapi-router-controller: ibutsu_server.controllers.admin.user_controller
    put:
      operationId: update_user
      parameters:
        - description: The ID of the user to update
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        $ref: '#/components/requestBodies/User'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: successful operation
        400:
          description: Bad reqest, JSON required or not enough parameters
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
        404:
          description: User not found
      summary: Administration endpoint to update a user. Only accessible to superadmins.
      tags:
        - admin/user management
      x-openapi-router-controller: ibutsu_server.controllers.admin.user_controller
    delete:
      operationId: delete_user
      parameters:
        - description: The ID of the user to delete
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          description: The specified user was deleted
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
        404:
          description: User not found
      summary: Administration endpoint to delete a user. Only accessible to superadmins.
      tags:
        - admin/user management
      x-openapi-router-controller: ibutsu_server.controllers.admin.user_controller
  /admin/project:
    get:
      operationId: get_project_list
      parameters:
        - description: Fields to filter by
          explode: true
          in: query
          name: filter
          required: false
          schema:
            items:
              type: string
            type: array
          style: form
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectList'
          description: Returns a list of projects
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
      tags:
        - admin/project management
      summary: Administration endpoint to return a list of projects. Only accessible to superadmins.
      x-openapi-router-controller: ibutsu_server.controllers.admin.project_controller
    post:
      operationId: add_project
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Project'
        description: A project
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: A project was created
        400:
          description: Bad request, JSON required
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
      tags:
        - admin/project management
      summary: Administration endpoint to manually add a project. Only accessible to superadmins.
      x-openapi-router-controller: ibutsu_server.controllers.admin.project_controller
  /admin/project/{id}:
    get:
      operationId: get_project
      parameters:
        - description: The id of a project
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: Returns a projects
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
        404:
          description: The project does not exist
      tags:
        - admin/project management
      summary: Administration endpoint to return a project. Only accessible to superadmins.
      x-openapi-router-controller: ibutsu_server.controllers.admin.project_controller
    put:
      operationId: update_project
      parameters:
        - description: The ID of the project to update
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        $ref: '#/components/requestBodies/Project'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
          description: successful operation
        400:
          description: Bad reqest, JSON required or not enough parameters
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
        404:
          description: Project not found
      summary: Administration endpoint to update a project. Only accessible to superadmins.
      tags:
        - admin/project management
      x-openapi-router-controller: ibutsu_server.controllers.admin.project_controller
    delete:
      operationId: delete_project
      parameters:
        - description: The ID of the project to delete
          explode: false
          in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          description: The specified project was deleted
        401:
          description: The user needs to be logged in
        403:
          description: The user needs to be a superadmin
        404:
          description: Project not found
      summary: Administration endpoint to delete a project. Only accessible to superadmins.
      tags:
        - admin/project management
      x-openapi-router-controller: ibutsu_server.controllers.admin.project_controller
components:
  requestBodies:
    Result:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
      description: Result item
    ReportParameters:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ReportParameters'
      description: Report parameters
    WidgetConfig:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/WidgetConfig'
      description: Widget configuration
    Credentials:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Credentials'
      description: A login object
    AccountRegistration:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AccountRegistration'
      description: A user registering their account
    AccountRecovery:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AccountRecovery'
      description: A user recovering their password
    AccountReset:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AccountReset'
      description: A user resetting their password
    CreateToken:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateToken'
      description: Create a token for a user
    User:
      content:
        application/json:
          schema:
            example:
              id: 81e2c9d6-1593-4559-af4f-90f6f1f8fa03
              email: user@domain.com
              name: Namey McNameface
              is_superadmin: false
              is_active: true
              group_id: a16ad60e-bf23-4195-99dc-594858ad3e5e
            properties:
              id:
                description: The ID of the user
                example: 81e2c9d6-1593-4559-af4f-90f6f1f8fa03
                type: string
              email:
                description: The user's e-mail address
                example: user@domain.com
                type: string
              name:
                description: The user's name
                example: Namey McNameface
                type: string
                nullable: true
              is_superadmin:
                description: Flag to show if a user is a super-admin
                example: false
                type: boolean
              is_active:
                description: Flag to show if the user is active
                example: true
                type: boolean
              group_id:
                description: The ID of the group of this project
                example: a16ad60e-bf23-4195-99dc-594858ad3e5e
                type: string
                nullable: true
            required:
              - email
            type: object
    Project:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Project'
  schemas:
    Result:
      example:
        id: a16ad60e-bf23-4195-99dc-594858ad3e5e
        duration: 6.027456183070403
        result: passed
        project_id: 9212ac64-348f-4c1c-90f7-fd0a45bcb47c
        component: login
        env: qa
        metadata:
          jenkins:
            build_number: 123
            job_name: test-jenkins-job
          project: 'insights-qe'
          commit_hash: F4BA3E12
        start_time: 2020-05-15T16:18:32.014053
        source: source
        params:
          provider: vmware
          ip_stack: ipv4
        test_id: test_click_on_button
      properties:
        id:
          description: Unique ID of the test result
          example: a16ad60e-bf23-4195-99dc-594858ad3e5e
          type: string
        test_id:
          description: Unique id
          example: test_click_on_button
          type: string
        start_time:
          description: Timestamp of starttime.
          type: string
        duration:
          description: Duration of test in seconds.
          type: number
        result:
          description: Status of result.
          enum:
          - passed
          - failed
          - error
          - skipped
          - xpassed
          - xfailed
          type: string
        component:
          description: A component
          example: login
          type: string
          nullable: true
        env:
          description: The environment which is being tested
          example: qa
          type: string
          nullable: true
        run_id:
          description: The run this result is associated with
          example: 64c2ab9e-cd64-4815-bf73-83b00c2e650f
          type: string
          nullable: true
        project_id:
          description: The project this run is associated with
          example: 44941c55-9736-42f6-acce-ca3c4739d0f3
          type: string
          nullable: true
        metadata:
          example:
            jenkins:
              job_name: test-jenkins-job
              build_number: 123
            project: insights-qe
            commit_hash: F4BA3E12
          type: object
        params:
          example:
            provider: vmware
            ip_stack: ipv4
          type: object
        source:
          description: Where the data came from (useful for filtering)
          type: string
      type: object
    Run:
      example:
        id: 64c2ab9e-cd64-4815-bf73-83b00c2e650f
        created: 2020-05-15T16:18:32.014053
        duration: 540.05433
        source: my-tests
        start_time: 2020-05-15T16:18:32.014053
        component: login
        env: qa
        summary:
          errors: 1
          failures: 3
          skips: 0
          xfailures: 0
          xpasses: 1
          tests: 548
        metadata:
          component: login
          env: qa
      properties:
        id:
          description: Unique ID of the test run
          example: 64c2ab9e-cd64-4815-bf73-83b00c2e650f
          type: string
        created:
          description: The time this record was created
          example: 2020-05-15T16:18:32.014053
          type: string
        duration:
          description: Duration of tests in seconds
          example: 154.778524555
          type: number
        source:
          description: A source for this test run
          example: my-tests
          type: string
          nullable: true
        start_time:
          description: The time the test run started
          example: 2020-05-15T16:18:32.014053
          type: string
        component:
          description: A component
          example: login
          type: string
          nullable: true
        env:
          description: The environment which is being tested
          example: qa
          type: string
          nullable: true
        project_id:
          description: The project this run is associated with
          example: 44941c55-9736-42f6-acce-ca3c4739d0f3
          type: string
          nullable: true
        summary:
          description: A summary of the test results
          type: object
        metadata:
          description: Extra metadata for this run
          type: object
          nullable: true
      type: object
    UpdateRun:
      example:
        metadata:
          annotations:
            - name: deploymentAnnotation
              value: Application was deployed at <timestamp>
              description: Optional description
            - name: otherAnnotation
              value: A different type of annotation
              description: Optional description
      properties:
        metadata:
          description: Extra data for this run
          type: object
      type: object
    Artifact:
      example:
        filename: filename
        result_id: a16ad60e-bf23-4195-99dc-594858ad3e5e
        id: 22785097-a256-4aad-874b-9c204caba341
        additional_metadata:
          key: '{}'
        upload_date: 2021-03-08T14:48:51+00:00
      properties:
        id:
          description: Unique ID of the artifact
          example: 22785097-a256-4aad-874b-9c204caba341
          type: string
        result_id:
          description: ID of test result to attach artifact to
          example: a16ad60e-bf23-4195-99dc-594858ad3e5e
          type: string
        run_id:
          description: ID of test run to attach artifact to
          example: 04af3d2a-55c5-4562-9ed6-3bf30ac6753e
          type: string
        filename:
          description: ID of pet to update
          type: string
        additional_metadata:
          description: Additional data to pass to server
          type: object
        upload_date:
          description: The date this artifact was uploaded
          type: string
      type: object
    Project:
      example:
        id: 44941c55-9736-42f6-acce-ca3c4739d0f3
        name: my-project
        title: My Project
        owner_id: 6b8b01ad-a17e-4ca1-8df5-fadb41439567
        group_id: a16ad60e-bf23-4195-99dc-594858ad3e5e
      properties:
        id:
          description: Unique ID of the project
          example: 44941c55-9736-42f6-acce-ca3c4739d0f3
          type: string
        name:
          description: The machine name of the project
          example: my-project
          type: string
        title:
          description: The human-readable title of the project
          example: My project
          type: string
        owner_id:
          description: The ID of the owner of this project
          example: 6b8b01ad-a17e-4ca1-8df5-fadb41439567
          type: string
          nullable: true
        group_id:
          description: The ID of the group of this project
          example: a16ad60e-bf23-4195-99dc-594858ad3e5e
          type: string
          nullable: true
      type: object
    Dashboard:
      example:
        id: 62faa4ce-d264-46c2-813e-579949c8ab9b
        title: My Dashboard
        description: A dashboard for me
        filters: ''
        project_id: 44941c55-9736-42f6-acce-ca3c4739d0f3
        user_id: 90be2a4a-1a4d-4779-b40f-f08ccd7101d5
      properties:
        id:
          description: Unique ID of the dashboard
          example: 62faa4ce-d264-46c2-813e-579949c8ab9b
          type: string
        title:
          description: The title of the dashboard
          example: My Dashboard
          type: string
        description:
          description: A basic description of the dashboard
          example: A dashboard for me
          type: string
        filters:
          description: An optional set of filters
          example: ''
          type: string
        project_id:
          description: The ID of the project this dashboard is associated with
          example: 44941c55-9736-42f6-acce-ca3c4739d0f3
          type: string
        user_id:
          description: The ID of a user this dashboard might be associated with
          example: 90be2a4a-1a4d-4779-b40f-f08ccd7101d5
          type: string
      type: object
    Group:
      example:
        id: a16ad60e-bf23-4195-99dc-594858ad3e5e
        name: Example group
      properties:
        id:
          description: Unique ID of the group
          example: a16ad60e-bf23-4195-99dc-594858ad3e5e
          type: string
        name:
          description: The name of the group
          example: Group A
          type: string
      type: object
    ReportParameters:
      example:
        type: dashboard
        filter: test_navigation
        source: iqe-jenkins
      properties:
        type:
          description: The type of report to generate
          example: dashboard
          type: string
        filter:
          description: A regular expression to filter test results by
          example: test_navigation
          type: string
        source:
          description: The source of the test results
          example: iqe-jenkins
          type: string
      type: object
    Report:
      example:
        id: a9560d7d-dbe4-4a7f-8d09-dde6b5b137ae
        filename: myreport.zip
        mimetype: application/zip
        url: http://ibutsu/reports/download/myreport.zip
        download_url: http://ibutsu/reports/download/myreport.zip
        view_url: http://ibutsu/reports/view/myreport.zip
        parameters:
          type: dashboard
          filter: test_navigation
          source: iqe-jenkins
        status: done
      properties:
        id:
          description: Unique ID of the report
          example: a9560d7d-dbe4-4a7f-8d09-dde6b5b137ae
          type: string
        filename:
          description: The filename of the report
          example: myreport.zip
          type: string
        mimetype:
          description: The mime type of the downloadable file
          example: application/zip
          type: string
        url:
          description: The URL to the downloadable report (deprecated)
          example: http://ibutsu/reports/download/myreport.zip
          type: string
        download_url:
          description: The URL to the downloadable report
          example: http://ibutsu/reports/download/myreport.zip
          type: string
        view_url:
          description: The URL to the viewable report
          example: http://ibutsu/reports/view/myreport.html
          type: string
        parameters:
          $ref: '#/components/schemas/ReportParameters'
        status:
          description: The status of the report, one of "pending", "running", "done"
          example: done
          type: string
      type: object
    Import:
      example:
        id: e56740ba-0dbb-43ac-a556-364eefbf1f62
        status: done
        filename: test-run.xml
        format: JUnit
        run_id: 64c2ab9e-cd64-4815-bf73-83b00c2e650f
      properties:
        id:
          description: The database ID of the import
          example: e56740ba-0dbb-43ac-a556-364eefbf1f62
          type: string
        status:
          description: The current status of the import, can be one of "pending", "running", "done"
          example: done
          type: string
        filename:
          description: The name of the file that was uploaded
          example: test-run.xml
          type: string
        format:
          description: The format of the file uploaded
          example: JUnit
          type: string
        run_id:
          description: The ID of the run from the import
          example: 64c2ab9e-cd64-4815-bf73-83b00c2e650f
          type: string
      type: object
    WidgetConfig:
      example:
        id: afbcf5c7-1ffd-4367-b228-5a868c29e0ef
        type: widget
        widget: jenkins-heatmap
        project_id: 44941c55-9736-42f6-acce-ca3c4739d0f3
        weight: 0
        params:
          job_name: integration_tests
          builds: 5
          group_field: metadata.component
          sort_field: starttime
        title: Jenkins Pipeline Health
      properties:
        id:
          description: The internal ID of the WidgetConfig
          example: afbcf5c7-1ffd-4367-b228-5a868c29e0ef
          type: string
        type:
          description: The type of widget, one of either "widget" or "view"
          example: widget
          type: string
        widget:
          description: The widget to render, from the list at /widget/types
          example: jenkins-heatmap
          type: string
        project_id:
          description: The project ID for which the widget is designed
          example: 44941c55-9736-42f6-acce-ca3c4739d0f3
          type: string
        weight:
          description: The weighting for the widget, lower weight means it will display first
          example: 0
          type: integer
        params:
          description: A dictionary of parameters to send to the widget
          example:
            job_name: integration_tests
            builds: 5
            group_field: metadata.component
            sort_field: starttime
          type: object
        title:
          description: The title shown on the widget or page
          example: Job Health
          type: string
      type: object
    WidgetParam:
      example:
        name: job_name
        description: The Jenkins job name
        type: string
      properties:
        name:
          description: The name of the parameter to supply to the widget
          example: job_name
          type: string
        description:
          description: A friendly description of the parameter
          example: The Jenkins job name
          type: string
        type:
          description: The type of parameter (string, integer, etc)
          example: string
          type: string
      type: object
    WidgetType:
      example:
        id: jenkins-heatmap
        title: Jenkins Pipeline Heatmap
        description: A heatmap of test runs and trends from a Jenkins pipeline
        params:
          - name: job_name
            description: The Jenkins job name
            type: string
          - name: builds
            description: The number of Jenkins builds to analyze
            type: integer
          - name: group_field
            description: The field in a result to group by
            type: string
          - name: sort_field
            description: The field to sort results by
            type: string
        type: widget
      properties:
        id:
          description: A unique identifier for this widget type
          example: heatmap
          type: string
        title:
          description: The title of the widget, for users to see
          example: Heatmap
          type: string
        description:
          description: A helpful description of this widget type
          example: A heatmap of runs and trends
          type: string
        params:
          description: A dictionary or map of parameters to values
          example:
            - name: job_name
              description: The Jenkins job name
              type: string
            - name: builds
              description: The number of Jenkins builds to analyze
              type: integer
            - name: group_field
              description: The field in a result to group by
              type: string
            - name: sort_field
              description: The field to sort results by
              type: string
          items:
            $ref: '#/components/schemas/WidgetParam'
          type: array
        type:
          description: The type of widget (widget, view)
          example: widget
          type: string
      type: object
    Health:
      example:
        status: "OK"
        message: "Service is running"
      properties:
        status:
          description: The status of the database, one of "OK", "Error", "Pending"
          example: "Error"
          type: string
        message:
          description: A message to explain the current status
          example: "Cannot connect to database"
          type: string
      type: object
    HealthInfo:
      example:
        frontend: "http://localhost:3000"
        backend: "http://localhost:8080"
        api_url: "http://localhost:8080/api"
      properties:
        frontend:
          description: The URL of the frontend
          example: http://localhost:3000
          type: string
        backend:
          description: The URL of the backend
          example: http://localhost:8080
          type: string
        api_ui:
          description: The URL to the UI for the API
          example: http://localhost:8080/api/ui/
          type: string
      type: object
    LoginToken:
      example:
        token: eyJhbGciOiJIUzI1NiJ9.SGVsbG8sIHdvcmxkIQ.onO9Ihudz3WkiauDO2Uhyuz0Y18UASXlSc1eS0NkWyA
      properties:
        token:
          description: The JWT token returned from a successful login
          example: eyJhbGciOiJIUzI1NiJ9.SGVsbG8sIHdvcmxkIQ.onO9Ihudz3WkiauDO2Uhyuz0Y18UASXlSc1eS0NkWyA
          type: string
      type: object
    LoginError:
      example:
        code: ERR01
        message: Username or password was invalid
      properties:
        code:
          description: An error code generated by the server
          example: ERR01
          type: string
        message:
          description: The error message that corresponds with the error code
          example: Username or password was invalid
          type: string
      type: object
    LoginSupport:
      example:
        user: true
        keycloak: true
        google: false
        github: true
        facebook: false
        gitlab: true
      properties:
        user:
          description: Flag to see if email/password login is available
          example: true
          type: boolean
        keycloak:
          description: Flag to see if Keycloak login is available
          example: true
          type: boolean
        google:
          description: Flag to see if Google login is available
          example: true
          type: boolean
        github:
          description: Flag to see if GitHub login is available
          example: true
          type: boolean
        facebook:
          description: Flag to see if Facebook login is available
          example: true
          type: boolean
        gitlab:
          description: Flag to see if GitLab login is available
          example: true
          type: boolean
      type: object
    LoginConfig:
      example:
        client_id: ff542f48922114019fc5befd0fa0e107b494c365fa4f8af09f3fcb2eb6dc0f77
        redirect_uri: /api/login/oauth
        scope: read:user
      properties:
        client_id:
          description: The client ID for the provider
          example: ff542f48922114019fc5befd0fa0e107b494c365fa4f8af09f3fcb2eb6dc0f77
          type: string
        redirect_uri:
          description: The redirect URI for the provider to call back
          example: /api/login/oauth
          type: string
        scope:
          description: The OAuth2 permission scope
          example: read:user
          type: string
      type: object
    Credentials:
      example:
        email: me@example.com
        password: mysupersecretpassword
      properties:
        email:
          description: The e-mail address of the user
          example: me@example.com
          type: string
        password:
          description: The password for the user
          example: mysupersecretpassword
          type: string
      required:
        - email
        - password
      type: object
    AccountRegistration:
      example:
        email: user@domain.com
        password: supersecretpassword
      properties:
        email:
          description: The user's e-mail address
          example: user@domain.com
          type: string
        password:
          description: The user's password
          example: supersecretpassword
          type: string
      required:
        - email
        - password
      type: object
    AccountRecovery:
      example:
        email: user@domain.com
      properties:
        email:
          description: The user's e-mail address
          example: user@domain.com
          type: string
      required:
        - email
      type: object
    AccountReset:
      example:
        activation_code: YjdmYWFkMTItNzkxZC00MjE4LTgwZGItOWFlOWM2Y2RhOTM5
        password: supersecretpassword
      properties:
        activation_code:
          description: The activation code generated by Ibutsu
          example: YjdmYWFkMTItNzkxZC00MjE4LTgwZGItOWFlOWM2Y2RhOTM5
          type: string
        password:
          description: The user's password
          example: supersecretpassword
          type: string
      required:
        - activation_code
        - password
      type: object
    User:
      example:
        id: 81e2c9d6-1593-4559-af4f-90f6f1f8fa03
        email: user@domain.com
        name: Namey McNameface
        is_superadmin: false
        is_active: true
        group_id: a16ad60e-bf23-4195-99dc-594858ad3e5e
      properties:
        id:
          description: The ID of the user
          example: 81e2c9d6-1593-4559-af4f-90f6f1f8fa03
          type: string
        email:
          description: The user's e-mail address
          example: user@domain.com
          type: string
        name:
          description: The user's name
          example: Namey McNameface
          type: string
          nullable: true
        is_superadmin:
          description: Flag to show if a user is a super-admin
          example: false
          type: boolean
        is_active:
          description: Flag to show if the user is active
          example: true
          type: boolean
        group_id:
          description: The ID of the group of this project
          example: a16ad60e-bf23-4195-99dc-594858ad3e5e
          type: string
          nullable: true
      required:
        - email
      type: object
    CreateToken:
      example:
        name: My user token
        expires: 2038-12-31T23:59:59+0000
      properties:
        name:
          description: The name given to this token
          example: My user token
          type: string
        expires:
          description: The date and time when this token expires
          example: 2038-12-31T23:59:59+0000
          type: string
          nullable: true
      required:
        - name
        - expires
      type: object
    Token:
      example:
        id: e2772010-bc06-47ed-8b6b-767ab87427cc
        user_id: 81e2c9d6-1593-4559-af4f-90f6f1f8fa03
        name: My user token
        expires: 2038-12-31T23:59:59+0000
        token: 64ad787a-5aa8-48fa-842e-6e3b9631308a
      properties:
        id:
          description: The ID of the token
          example: e2772010-bc06-47ed-8b6b-767ab87427cc
          type: string
        user_id:
          description: The ID of the user that owns this token
          example: 81e2c9d6-1593-4559-af4f-90f6f1f8fa03
          type: string
        name:
          description: The name given to this token
          example: My user token
          type: string
        expires:
          description: The date and time when this token expires
          example: 2038-12-31T23:59:59+0000
          type: string
          nullable: true
        token:
          description: The token itself
          example: 64ad787a-5aa8-48fa-842e-6e3b9631308a
          type: string
      required:
        - id
        - user_id
        - name
        - token
      type: object
    Pagination:
      example:
        page: 2
        pageSize: 25
        totalPages: 10
        totalItems: 243
      properties:
        page:
          description: The current page number
          example: 2
          type: integer
        pageSize:
          description: The number of items per page
          example: 25
          type: integer
        totalPages:
          description: The total number of pages
          example: 10
          type: integer
        totalItems:
          description: The total number of items for this query
          example: 243
          type: integer
      type: object
    ResultList:
      example:
        results:
        - duration: 6.027456183070403
          result: passed
          metadata:
            jenkins_build: 145
            commit_hash: F4BA3E12
          starttime: 0.8008281904610115
          source: source
          params:
            provider: vmware
            ip_stack: ipv4
          test_id: test_id
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        results:
          items:
            $ref: '#/components/schemas/Result'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    RunList:
      example:
        runs:
        - id: 64c2ab9e-cd64-4815-bf73-83b00c2e650f
          duration: 540.05433
          summary:
            errors: 1
            failures: 3
            skips: 0
            xfailures: 0
            xpasses: 1
            tests: 548
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        runs:
          items:
            $ref: '#/components/schemas/Run'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    ArtifactList:
      example:
        artifacts:
        - filename: filename
          resultId: a16ad60e-bf23-4195-99dc-594858ad3e5e
          id: 22785097-a256-4aad-874b-9c204caba341
          upload_date: 2021-03-08T14:48:51+00:00
          additional_metadata:
            key: '{}'
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        artifacts:
          items:
            $ref: '#/components/schemas/Artifact'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    ProjectList:
      example:
        projects:
        - id: 44941c55-9736-42f6-acce-ca3c4739d0f3
          name: My Project
          ownerId: 6b8b01ad-a17e-4ca1-8df5-fadb41439567
          groupId: a16ad60e-bf23-4195-99dc-594858ad3e5e
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        projects:
          items:
            $ref: '#/components/schemas/Project'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    DashboardList:
      example:
        dashboards:
        - id: 62faa4ce-d264-46c2-813e-579949c8ab9b
          title: My Dashboard
          description: A dashboard for me
          filters: ''
          project_id: 44941c55-9736-42f6-acce-ca3c4739d0f3
          user_id: 90be2a4a-1a4d-4779-b40f-f08ccd7101d5
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        dashboards:
          items:
            $ref: '#/components/schemas/Dashboard'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    GroupList:
      example:
        groups:
        - id: a16ad60e-bf23-4195-99dc-594858ad3e5e
          name: Example group
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        groups:
          items:
            $ref: '#/components/schemas/Group'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    ReportList:
      example:
        reports:
        - id: a9560d7d-dbe4-4a7f-8d09-dde6b5b137ae
          filename: myreport.zip
          mimetype: application/zip
          url: http://ibutsu/reports/download/myreport.zip
          parameters:
            type: dashboard
            filter: test_navigation
            source: iqe-jenkins
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        reports:
          items:
            $ref: '#/components/schemas/Report'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    WidgetConfigList:
      example:
        widgets:
          - id: afbcf5c7-1ffd-4367-b228-5a868c29e0ef
            type: widget
            widget: heatmap
            params:
              - field: metadata.jenkins.job_name
                type: scalar
                value: my-jenkins-job-name
              - field: metadata.jenkins.build_number
                type: range-desc
                value: 5
            title: Job Health
        pagination:
          page: 1
          pageSize: 25
          totalPages: 1
          totalItems: 1
      properties:
        widgets:
          items:
            $ref: '#/components/schemas/WidgetConfig'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    WidgetTypeList:
      example:
        types:
          - id: heatmap
            title: Heatmap
            description: A heatmap of runs and trends
        pagination:
          page: 1
          pageSize: 25
          totalPages: 1
          totalItems: 1
      properties:
        types:
          items:
            $ref: '#/components/schemas/WidgetType'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    TokenList:
      example:
        tokens:
          - id: e2772010-bc06-47ed-8b6b-767ab87427cc
            user_id: 81e2c9d6-1593-4559-af4f-90f6f1f8fa03
            name: My user token
            expires: 2038-12-31T23:59:59+0000
            token: 64ad787a-5aa8-48fa-842e-6e3b9631308a
        pagination:
          page: 1
          pageSize: 25
          totalPages: 1
          totalItems: 1
      properties:
        tokens:
          items:
            $ref: '#/components/schemas/Token'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
    UserList:
      example:
        users:
          - id: 64c2ab9e-cd64-4815-bf73-83b00c2e650f
            email: jdoe@example.com
        pagination:
          page: 2
          pageSize: 25
          totalPages: 10
          totalItems: 243
      properties:
        users:
          items:
            $ref: '#/components/schemas/User'
          type: array
        pagination:
          $ref: '#/components/schemas/Pagination'
      type: object
  parameters:
    Page:
      description: Set the page of items to return, defaults to 1
      explode: true
      in: query
      name: page
      required: false
      schema:
        format: int32
        type: integer
      style: form
    PageSize:
      description: Set the number of items per page, defaults to 25
      explode: true
      in: query
      name: pageSize
      required: false
      schema:
        format: int32
        type: integer
      style: form
  securitySchemes:
    jwt:
      type: http
      scheme: bearer
      bearerFormat: JWT
      x-bearerInfoFunc: ibutsu_server.util.jwt.decode_token
